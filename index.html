<!DOCTYPE html>

<html lang ="en">

<meta charset="utf-8">

<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">
<link rel="stylesheet" href="./css/styles.css">
<link rel="stylesheet" href="./src/radar-chart.css">

<head>
    <title>Player Dash</title>
</head>

<body>
<div id="navbar">
    <a id="soccer_legends" href = "index.html">Soccer Legends</a>

    <a class ="right" href="ProcessBook.html">Process Book</a>
    <a class ="right" href="statInfo.html">Statistical Info</a>
    <a class ="right" href="BubbleChart.html">Explore Data</a>
    <a class="active right" href="index.html">Player Comparison</a>
</div>

<div id="select-div">
    <label for="dropdown" id="dropdown-label">Choose a Player</label>

</div>
<div class="centering">
    <select id="dropdown"></select>
</div>



<!-- <h1>Single Players stats</h1> -->

<div id="first_container">
    <div id="player_info">
        <p id="player_name">Brendan Aaronson</p>
        <hr>
        <p class = "subInfo" id="league">League: Premier League</p>
        <p class ="subInfo" id="position">Position: Midfielder/Forward</p>
        <p class ="subInfo" id="club">Club: Leeds United</p>
        <p class ="subInfo" id="nation">Nationality: USA</p>
        <p class ="subInfo" id="age">Age: 22</p>
    </div>
    <div id="barChart"></div>
</div>
<br><br>
<!--<h1>League Comparison</h1> -->
<div id="select-league">
    <label  id="dropdown-league-label">Click a League to Compare</label>
</div>

<script type="text/javascript">
    //////
    const img1 = new Image(128,128);
    img1.src = "images/serie.png";

    const img2 = new Image(128,128);
    img2.src = "images/Laliga.png";

    const img3 = new Image(128,128);
    img3.src = "images/Bund.png";

    const img4 = new Image(128,128);
    img4.src = "images/pre.png";

    const img5 = new Image(128,128);
    img5.src = "images/Ligue.png";

    img1.style.border = "10px solid silver";
    img1.style.borderRadius = "30px";
    img1.style.position = "relative";
    img1.style.left = "70px";
    img1.addEventListener("click", function() {
        img1.style.border = "10px solid black";
        img2.style.border = "10px solid silver";
        img3.style.border = "10px solid silver";
        img4.style.border = "10px solid silver";
        img5.style.border = "10px solid silver";
       selectedValue2 = "Serie A";
       loadData();
    })
    document.body.appendChild(img1);

    
    img2.style.border = "10px solid silver";
    img2.style.borderRadius = "30px"
    //img2.align = "center"
    img2.style.position = "relative";
    img2.style.left = "220px";
    img2.addEventListener("click", function() {
        img2.style.border = "10px solid black";
        img1.style.border = "10px solid silver";
        img3.style.border = "10px solid silver";
        img4.style.border = "10px solid silver";
        img5.style.border = "10px solid silver";
       selectedValue2 = "La Liga";
       loadData();
    })
    document.body.appendChild(img2);

    
    img3.style.border = "10px solid silver";
    img3.style.borderRadius = "30px"
    img3.style.position = "relative";
    img3.style.left = "370px";
    img3.addEventListener("click", function() {
        img1.style.border = "10px solid silver";
        img2.style.border = "10px solid silver";
        img3.style.border = "10px solid black";
        img4.style.border = "10px solid silver";
        img5.style.border = "10px solid silver";
       selectedValue2 = "Bundesliga";
       loadData();
    })
    document.body.appendChild(img3);

   
    img4.style.border = "10px solid silver";
    img4.style.borderRadius = "30px"
    img4.style.position = "relative";
    img4.style.left = "520px";
    img4.addEventListener("click", function() {
        img1.style.border = "10px solid silver";
        img2.style.border = "10px solid silver";
        img3.style.border = "10px solid silver";
        img4.style.border = "10px solid black";
        img5.style.border = "10px solid silver";
       selectedValue2 = "Premier League";
       loadData();
    })
    document.body.appendChild(img4);

   
    img5.style.border = "10px solid silver";
    img5.style.borderRadius = "30px"
    img5.align = "justify";
    img5.style.position = "relative";
    img5.style.left = "670px";
    img5.addEventListener("click", function() {
        img1.style.border = "10px solid silver";
        img2.style.border = "10px solid silver";
        img3.style.border = "10px solid silver";
        img4.style.border = "10px solid silver";
        img5.style.border = "10px solid black";
       selectedValue2 = "Ligue 1";
       loadData();
    })
    document.body.appendChild(img5);
</script>

<div class="centering">
   <!-- <select id="dropdown2"></select>-->
</div>


<div id="comparison"></div>

<div id="scatter" ></div>


<script type="text/javascript" src="//d3js.org/d3.v3.js"></script>


<script type="text/javascript" src="./src/radar-chart.js"></script>

<script type="text/javascript" src="./src/bar-chart.js"></script>


<script type="text/javascript" src="./js/d3.min.js"></script>

<script type="text/javascript" src="./js/main.js"></script>

<script type="text/javascript" src="./js/scatter.js"></script>

<!--<script type="text/javascript" src=".js/topojson/topojson.min.js"></script> -->

<script type="text/javascript">

spider.Config.color = function() {};

spider.Config.radius = 3;
var selectedValue = 'Brenden Aaronson';
var selectedValue2 = 'Ligue 1';//placeholder for selected players

var allData = [
    {
    className: 'Brenden Aaronson', // optional can be used for styling
    axes: [
    {axis: "Passing", value: 46.55},
    {axis: "shooting", value: 17.44},
    {axis: "Dribbling", value: 42.44},
    {axis: "Defending", value: 41.92},
    {axis: "Discipline", value: 74.88},
    {axis: "Involvement", value: 87.0}
    ]
    },
    {
    className: 'Ligue 1', // optional can be used for styling
    axes: [
    {axis: "Passing", value: 46.55},
    {axis: "shooting", value: 17.44},
    {axis: "Dribbling", value: 42.44},
    {axis: "Defending", value: 41.92},
    {axis: "Discipline", value: 74.88},
    {axis: "Involvement", value: 87.0}
    ]
}
];//placeholder for selected players data

var cfg = spider.chart().config(); // retrieve default config
console.log("96")
loadPlayer();
//////listen to dropdown selection and store it into a cache
var dropdownSelect  = document.getElementById("dropdown");
var dropdownSelect2 = document.getElementById("dropdown2");



//listen to change
dropdownSelect.addEventListener("change", (e) => {
const value = e.target.value;
const text = dropdownSelect.options[dropdownSelect.selectedIndex].text;
    if (value) {
        console.log("PLAYER CHANGE")
        selectedValue = value;
        console.log("why is",selectedValue);
        var cfg = spider.chart().config(); // retrieve default config
        loadPlayer();
        } else {
        console.log("nothing");
        }
    });

/*
//second dropdown change (for the radar charts)
dropdownSelect2.addEventListener("change", (e) => {
const value = e.target.value;
const text = dropdownSelect2.options[dropdownSelect2.selectedIndex].text;
    if (value) {
        selectedValue2 = value;
        var cfg = spider.chart().config(); // retrieve default config
        loadData();
        } else {
        console.log("nothing");
        }
    });*/
//update when player dropdown
function loadPlayer(){
    d3v7.json("data/radar_data.json").then(function(data){
    Object.keys(data.data).forEach(d => {
    //console.log(data.data[d].className)
    if (data.data[d].className === selectedValue){
        allData[0] = data.data[d];   
        loadData();
        }//means selecting the specific data point matching dropdown
    })})
    
    
}

function loadData(){
    d3v7.json("data/data_means.json").then(function(data){

        Object.keys(data.data).forEach(d => {

        //console.log(data.data[d].className)

        if (data.data[d].className == selectedValue2){
            allData[1] = data.data[d];
        }//means selecting the specific data point matching dropdown

    })
    d3.select("#first").remove();
    var svg = d3.select('#comparison').append('svg')
    .attr('width', cfg.w+55)
    .attr('height', cfg.h + cfg.h / 4)
    .attr("id","first");
    console.log("ready to load",allData[0],allData[1])
    svg.append('g').classed('single', 1).datum(allData).call(spider.chart());
        }
     )
     renderBar(allData)
     console.log(allData[1])
     console.log("bar chart created")
     console.log("new Load is done")
    }


    

</script>




</body>

</html>
